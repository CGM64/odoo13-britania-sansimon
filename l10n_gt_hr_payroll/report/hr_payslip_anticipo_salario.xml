<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="formato_recibo_pago_salario">
        <t t-call="web.basic_layout">
            <div class="page px-4">
                
                <t t-set="base" t-value="0" />
                <t t-set="liquido" t-value="0" />
                <t t-set="bono_ley" t-value="0" />
                <t t-set="comisiones" t-value="0" />
                <t t-set="anticipo_salario" t-value="0" />
                <t t-set="comisiones_pagadas" t-value="0" />
                <t t-set="igss_laboral" t-value="0" />

                <t t-set="total_pagos" t-value="0" />
                <t t-set="total_descuentos" t-value="0" />

                <t t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line">
                    <t t-if="(line.code == 'HRBDC')">
                        <t t-set="bono_ley" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'COMISION')">
                        <t t-set="comisiones" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'BASIC')">
                        <t t-set="base" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'ANTIQUI')">
                        <t t-set="anticipo_salario" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'DESCOMISION')">
                        <t t-set="comisiones_pagadas" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'LIQRE')">
                        <t t-set="liquido" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'HRCLI')">
                        <t t-set="igss_laboral" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'TDESC')">
                        <t t-set="total_descuentos" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'HRTIG')">
                        <t t-set="total_pagos" t-value="line.total" />
                    </t>
                </t>
                
                <table class="">
                    <tr>
                        <td>
                            <span t-field="o.company_id.company_registry"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span t-field="o.compute_date"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            LIQUIDACION PAGO DE SALARIO
                        </td>
                    </tr>
                    <tr>
                        <td>
                            CORRESPONDIENTE A NOMINA DEL: <span t-field="o.date_from"/> - <span t-field="o.date_to"/>
                        </td>
                    </tr>
                    <tr>
                        <td><span t-field="o.employee_id"/></td>
                    </tr>
                </table>
                <div class="px-3 w-100">
                    <table class="mt-2" style="width: 100% !important;">
                        <thead class="border-bottom border-dark">
                            <tr>
                                <td class="text-left">CONCEPTOS:</td>
                                <td class="text-right">PAGOS</td>
                                <td class="text-right">DESCUENTOS</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-if="bono_ley != 0">
                                <td class="text-left">Bono Ley 37-2001</td>
                                <td class="text-right"><t t-esc="bono_ley" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr t-if="comisiones != 0">
                                <td class="text-left">Comisiones</td>
                                <td class="text-right"><t t-esc="comisiones" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr t-if="base != 0">
                                <td class="text-left">Sueldo</td>
                                <td class="text-right"><t t-esc="base" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr t-if="anticipo_salario != 0">
                                <td class="text-left">Anticipo Salario</td>
                                <td class="text-right"></td>
                                <td class="text-right"><t t-esc="anticipo_salario" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                            </tr>
                            <tr t-if="comisiones_pagadas != 0">
                                <td class="text-left">Comisiones pagadas en Quincena</td>
                                <td class="text-right"></td>
                                <td class="text-right"><t t-esc="comisiones_pagadas" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                            </tr>
                            <tr t-if="igss_laboral != 0">
                                <td class="text-left">IGSS Laboral</td>
                                <td class="text-right border-bottom border-dark"></td>
                                <td class="text-right border-bottom border-dark"><t t-esc="igss_laboral" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right"><t t-esc="total_pagos" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"><t t-esc="total_descuentos" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                            </tr>
                            <tr>
                                <td class="text-left">LIQUIDO A RECIBIR:</td>
                                <td class="text-right"></td>
                                <td class="text-right"><t t-esc="liquido" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>
                    Por este medio hago constar que hasta la fecha he recibido de la empresa <span t-field="o.company_id.company_registry"/> todas las prestaciones laborales que me corresponden: incluso decreto No. 37-2001. así como mis salarios ordinarios y extraordinarios: según lo especifica la Constitución de la República, leyes, reglamentos y convenios de trabajo y previsión social.
                </p>
                <table class="mt-3" style="width: 100% !important;">
                    <tbody>
                        <tr>
                            <td class="text-center">_________________________________________________________________</td>
                        </tr>
                        <tr>
                            <td class="text-center"><span t-field="o.employee_id"/></td>
                        </tr>
                        <tr>
                            <td class="text-center"><span t-field="o.employee_id.cui"/></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </t>
    </template>

    <template id="reporte_recibo_pago_salario">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="o" t-value="o.with_context(lang=o.employee_id.sudo().address_home_id.lang or o.env.lang)" />
                <t t-call="l10n_gt_hr_payroll.formato_recibo_pago_salario" t-lang="o.env.lang" />
            </t>
        </t>
    </template>
</odoo>