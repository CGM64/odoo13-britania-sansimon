<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="formato_recibo_anticipo_quincena">
        <t t-call="web.basic_layout">
            <div class="page px-4">
                
                <t t-set="base" t-value="0" />
                <t t-set="comision" t-value="0" />
                <t t-set="premio" t-value="0" />
                <t t-set="liquido" t-value="0" />
                <t t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line">
                    <t t-if="(line.code == 'HRSUD')">
                        <t t-set="base" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'COMISION')">
                        <t t-set="comision" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'PREMIO')">
                        <t t-set="premio" t-value="line.total" />
                    </t>
                    <t t-if="(line.code == 'LIQRE')">
                        <t t-set="liquido" t-value="line.total" />
                    </t>
                </t>
                
                <table class="" style="width: 100% !important;">
                    <tr>
                        <td>
                            EMPRESA:
                        </td>
                        <td>
                            <span t-field="o.company_id.company_registry"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            CORRESPONDIENTE A:
                        </td>
                        <td>
                            NOMINA ANTICIPO DEL: <span t-field="o.date_from"/> - <span t-field="o.date_to"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            POR LOS SIGUIENTES CONCEPTOS:
                        </td>
                    </tr>
                </table>
                <div class="w-100">
                    <table class="mt-2" style="width: 100% !important;">
                        <thead class="border-bottom border-dark">
                            <tr>
                                <td class="text-left">Concepto</td>
                                <td class="text-right">Percepción</td>
                                <td class="text-right">Deducción</td>
                                <td class="text-right">Total</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-left">Anticipo Salario</td>
                                <td class="text-right"><t t-esc="base" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr t-if="comision > 0">
                                <td class="text-left">Comisiones</td>
                                <td class="text-right"><t t-esc="comision" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr t-if="premio > 0">
                                <td class="text-left">Premios</td>
                                <td class="text-right"><t t-esc="premio" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right"><t t-esc="liquido" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                                <td class="text-right"></td>
                                <td class="text-right"><t t-esc="liquido" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' /></td>
                            </tr>
                            <tr>
                                <td class="text-left">&#160;</td>
                                <td class="text-right"></td>
                                <td class="text-right"></td>
                                <td class="text-right"></td>
                            </tr>
                            <tr>
                                <td class="text-left">CANTIDAD EN LETRAS:</td>
                                <td class="text-right" colspan="3"><t t-esc="o.monto_letras(liquido)" /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <table class="mt-3" style="width: 100% !important;">
                    <tbody>
                        <tr>
                            <td class="text-center">________________________________________________________________________________</td>
                        </tr>
                        <tr>
                            <td class="text-center"><span t-field="o.employee_id"/></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </t>
    </template>

    <template id="reporte_recibo_anticipo_quincena">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="o" t-value="o.with_context(lang=o.employee_id.sudo().address_home_id.lang or o.env.lang)" />
                <t t-call="l10n_gt_hr_payroll.formato_recibo_anticipo_quincena" t-lang="o.env.lang" />
            </t>
        </t>
    </template>
</odoo>