<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<!--Acción-->
	<record id="gs_gastos_actions_mis_gastos" model="ir.actions.act_window">
		<field name="name">Mis Gastos</field>
		<field name="res_model">gs.gastos</field>
		<field name="view_mode">kanban,form,tree</field>
		<field name="help" type="html">
			<p class="o_view_nocontent_smiling_face">
        Crea una nueva solicitud de gasto.
			</p>
		</field>
	</record>


	<record id="gs_gastos_view_form" model="ir.ui.view">
		<field name="name">gs.gastos.view.form</field>
		<field name="model">gs.gastos</field>
		<field name="arch" type="xml">
			<form string="Gastos" class="o_expense_form">

				<header>
					<field name="state" widget="statusbar" statusbar_visible="draft,cancel,approved,done"/>
					<button name="button_approved" string="Aprobar Solicitud" type="object" attrs="{'invisible':[('state','!=','draft')]}" />
					<button name="button_cancel" string="Cancelar Solicitud" type="object" attrs="{'invisible':[('state','!=','approved')]}"/>
					<button name="button_done" string="Pagar" type="object" attrs="{'invisible':[('state','!=','approved')]}"/>
					<button name="button_draft" string="Cambiar a Borrador" type="object" attrs="{'invisible':[('state','=','draft')]}"/>
					<button name="open_window" class="oe_highlight" string="Registrar Pago" type="object"/>

				</header>

				<sheet>
					<div class="oe_title">
						<label for="name" class="oe_edit_only"/>
						<h1>
							<field name="name" placeholder="e.j. Descripción del gasto"/>
						</h1>
					</div>
					<group>
						<group>
							<field name="partner_id" options="{'no_create': True}"/>
							<field name="journal_id" options="{'no_create': True}" type="row"/>
							<field name="unit_amount" options="{'no_create': True}"/>
						</group>
						<group>
							<field name="reference"/>
							<field name="date"/>
							<field name="currency_id" groups="base.group_multi_currency"/>
							<field name="priority" widget="priority"/>
						</group>
					</group>

					<div>
						<field name="description" class="oe_inline" placeholder="Observaciones..."/>
					</div>

				</sheet>
			</form>
		</field>
	</record>


	<record id="gs_gastos_view_tree" model="ir.ui.view">
		<field name="name">gs.gastos.view.tree</field>
		<field name="model">gs.gastos</field>
		<field name="arch" type="xml">
			<tree string="Gastos">
				<field name="state" widget="statusbar" invisible="1" />
				<field name="partner_id" readonly="1"/>
				<field name="name" placeholder="e.j. Descripción del gasto" readonly="1"/>
				<field name="priority" widget="priority" readonly="1"/>
				<field name="unit_amount" options="{'no_create': True}"/>
				<!-- <field name="unit_amount" widget="monetary" options="{'currency_field': 'currency_id', 'field_digits': True}" readonly="1"/> -->
				<field name="date"/>
			</tree>
		</field>
	</record>


	<record id="gs_gastos_view_kanban" model="ir.ui.view">
		<field name="name">gs.gastos.view.kanban</field>
		<field name="model">gs.gastos</field>
		<field name="arch" type="xml">
			<kanban class="o_custom_crm_visit_kanban">
				<!--<kanban default_group_by="stage_id" class="o_kanban_small_column o_opportunity_kanban" on_create="quick_create" quick_create_view="crm.quick_create_opportunity_form" archivable="false">-->>

				<field name="state" widget="statusbar" invisible="1" />
				<field name="partner_id"/>
				<field name="name" placeholder="e.j. Descripción del gasto"/>
				<field name="priority" widget="priority"/>
				<field name="unit_amount" widget="monetary" options="{'currency_field': 'currency_id', 'field_digits': True}"/>
				<field name="date"/>

				<templates>
					<t t-name="kanban-box">
						<div t-attf-class="oe_kanban_global_click">
							<div class="o_kanban_image">
								<!--<img alt="Avatar" t-att-src="kanban_image('custom_crm.visit', 'image', record.id.raw_value)"/>-->
							</div>
							<div class="oe_kanban_content">
								<strong class="o_kanban_record_title">
									<field name="name"/>
								</strong>
							</div>
							<div class="text-muted o_kanban_record_subtitle">
								<t t-if="record.unit_amount.raw_value">
									<field name="unit_amount" widget="monetary" options="{'currency_field': 'currency_id', 'field_digits': True}"/>
									<span t-if="record.partner_id.value">,</span>
								</t>
								<span t-if="record.partner_id.value">
									<t t-esc="record.partner_id.value"/>
									<span t-if="record.partner_id.value">,</span>
								</span>
								<span>
									<field name="journal_id" readonly="1"/>
								</span>
							</div>

							<div class="o_kanban_record_bottom">
								<div class="oe_kanban_bottom_left">
									<field name="priority" readonly="1" widget="priority" groups="base.group_user"/>
									<span> Entregar: </span>
									<field name="date"/>
								</div>
							</div>

						</div>
					</t>
				</templates>
			</kanban>
		</field>
	</record>



	<!--Esto permite visualizar la aplicación en la página de inicio-->
	<!--Menú-->
	<menuitem id="menu_gs_gatos_root" name="Gastos" web_icon="sol_gasto,static/description/icon.png" groups="base.group_user" sequence="6" />
	<!--Sub-Menú-->
	<menuitem id="menu_gs_gastos_mis_gastos" name="Mis Gastos" sequence="1" parent="menu_gs_gatos_root" groups="base.group_user"/>
	<!--Llamado a la acción-->
	<menuitem id="menu__gs_gastos_mis_gastos_my_expenses_to_submit" sequence="1" parent="menu_gs_gastos_mis_gastos" action="gs_gastos_actions_mis_gastos"/>

</odoo>


