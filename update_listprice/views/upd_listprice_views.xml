<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

      <record id="view_upd_listprice_form" model="ir.ui.view">
        <field name="name">upd.listprice.form</field>
        <field name="model">upd.listprice</field>
        <field name="arch" type="xml">
          <form string="Lista de Precios" class="o_sale_order">
            <header>
              <button name="action_cancel" states="draft,send" type="object" string="Cancel"/>
              <button name="action_clean" icon="fa-eraser" states="draft" type="object" string="Limpiar" confirm="Esta seguro de borrar?"/>
              <button name="action_calcular" icon="fa-calculator" states="draft" type="object" string="Calcular"/>
              <field name="state" widget="statusbar" statusbar_visible="draft,send,cancel"/>
            </header>
            <sheet>
              <div class="oe_title">
                <h1>
                  <field name="name"/>
                </h1>
              </div>
              <group>
                <group>
                  <field name="applied_on" widget="radio"/>
                  <field name="compute_price" widget="radio"/>

                </group>
                <group>
                  <field name="categ_id" options="{'no_create_edit': True}" attrs="{
                                  'invisible':[('applied_on', '!=', '0_categoria')],
                                  'required':[('applied_on', '=', '0_categoria')]}"/>
                  <field name="vendor_bill_id" options="{'no_create_edit': True}" attrs="{
                                  'invisible':[('applied_on', '!=', '1_factura_compra')],
                                  'required':[('applied_on', '=', '1_factura_compra')]}"/>
                  <field name="partner_id" options="{'no_create_edit': True}" attrs="{
                                  'invisible':[('applied_on', '!=', '2_proveedor')],
                                  'required':[('applied_on', '=', '2_proveedor')]}"/>

                  <field name="fixed_price" options="{'no_create_edit': True}" attrs="{
                                  'invisible':[('compute_price', '!=', '4_fixed')],
                                  'required':[('compute_price', '=', '4_fixed')]}"/>
                  <field name="percent_price" options="{'no_create_edit': True}" attrs="{
                                  'invisible':[('compute_price', '!=', '5_percentage')],
                                  'required':[('compute_price', '=', '5_percentage')]}"/>
                  <field name="company_id" groups="base.group_multi_company"/>


                </group>
              </group>
              <notebook>
                <page string="Lines" name="lines_ids">
                  <field name="line_ids" mode="tree">
                    <tree string="Sales Order Lines" editable="bottom">
                      <field name="listprice_id" invisible="1"/>
                      <field name="product_id"/>
                      <field name="price_original"/>
                      <field name="price_nuevo"/>
                      <field name="percent_margen"/>
                      <field name="price_diferencia"/>
                      <field name="percent_diferencia"/>
                      <field name="state" invisible="1"/>
                      <field name="company_id" groups="base.group_multi_company"/>
                    </tree>
                  </field>
                </page>
                <page string="Informacion Adicional">
                  <group>
                    <field name="date"/>
                    <field name="ref"/>
                    <field name="narration"/>
                  </group>
                </page>
              </notebook>
            </sheet>
          </form>
        </field>
      </record>


      <record model="ir.actions.act_window" id="action_upd_listprice">
        <field name="name">Cambio de Lista de Precios</field>
        <field name="res_model">upd.listprice</field>
        <field name="view_mode">tree,form</field>
      </record>

      <menuitem name="Cambio de Lista de Precios" id="menu_upd_listprice" action="action_upd_listprice" sequence="145" parent="sale.product_menu_catalog"/>


    </data>
</odoo>
