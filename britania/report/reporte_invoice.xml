<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>
    <template id="britania.invoice_britania">
      <t t-call="web.basic_layout">

        <div class="header">
          <link rel="stylesheet" href="/britania/static/src/css/report.css"/>
          <div class="container">
            <div class="row fac_t_letra">
              <div class="col-4 text-center"><img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)" class="factura_logo"/></div>
              <div class="col-4 text-center">
                <h5><span t-field="o.company_id.name"/></h5>
                <t t-if="o.fel_setting_id"><br/><span t-esc="o.fel_setting_id.nombre_comercial.upper()"/></t>
                <t t-if="o.company_id.company_registry"><br/><span t-esc="o.company_id.company_registry.upper()"/></t>
                <small>
                  <br/><span t-esc="o.company_id.street.upper()"/>
                  <br/><span t-esc="o.company_id.street2.upper() if o.company_id.street2 else ''"/>
                  <span t-esc="o.company_id.city.upper()"/>,
                  <span t-esc="o.company_id.country_id.name.upper()"/>
                </small>
                <small><br/>PBX:
                  <span t-field="o.company_id.phone"/></small>
                <t t-if="o.company_id.fax">
                  <small>
                    - FAX:
                    <span t-field="o.company_id.fax"/></small>
                </t>
                <small><br/><span t-field="o.company_id.email"/></small>
                <small><br/>NIT:
                  <span t-field="o.company_id.vat"/></small>
              </div>
              <div class="col-4">
                <div>
                  <div class="col-12 text-center m-1">DOCUMENTO TRIBUTARIO ELECTRONICO</div>
                  <div class="col-12 text-center m-1"><t t-esc="o.journal_id.get_tipo_dte_info(o.journal_id.tipo_documento)"/>
                    ELECTRÓNICA</div>
                  <div class="col-12 m-1">
                    <div class="row">
                      <div class="col-7 p-0 m-0">
                        <strong>SERIE DE DOCUMENTO:</strong>
                      </div>
                      <div class="col-5">
                        <span t-field="o.fac_serie"/>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-7 p-0 m-0">
                        <strong>No. DE DTE:</strong>
                      </div>
                      <div class="col-5">
                        <span class="factura_dte_numero" t-field="o.fac_numero"/>
                      </div>
                    </div>
                  </div>
                  <div t-attf-class="col12 fac_t_letra_peq text-justify m-1 {{ 'fac_t_letra_blanca' if o.journal_id.tipo_documento != 'FCAM' else '' }}">
                    POR MEDIO DE ESTA UNICA FACTURA CAMBIARIA ELECTRONICA SE SERVIRA USTED PAGAR A LA ORDEN O ENDOSO DE COMERCIALIZADORA LA LAMINA,S.A. LA SUMA QUE SE INDICA DE ACUERDO A LAS CONDICIONES QUE SE ESTABLECEN EN EL PRESENTE TITULO,EN EL QUE ACEPTA HABER
                    RECIBIDO A ENTERA SATISFACCION CONFORME EL DETALLE SIGUIENTE.
                  </div>

                </div>
              </div>
            </div>
            <div class="row fac_t_letra_peq">
              No Interno:&#160;&#160;&#160;&#160;<span t-field="o.name"/>
              <t t-if="o.journal_id.tipo_documento in ('NABN','NCRE')">
                , Aplica Doc. Interno:
                <span t-field="o.reversed_entry_id.name"/>
              </t>
              <t t-if="o.journal_id.tipo_documento in ('NDEB')">
                , Aplica Doc. Interno:
                <span t-field="o.fel_factura_referencia_id.name"/>
              </t>
            </div>
          </div>
        </div>
        <div class="page">
          <link rel="stylesheet" href="/britania/static/src/css/report.css"/>
          <t t-foreach="o.detalle_factura()" t-as="pagina">
            <table class="factura_tabla factura_ancho fac_t_letra salto">
              <thead>
                <tr>
                  <th width="7%"></th>
                  <th width="3%"></th>
                  <th width="4%"></th>
                  <th width="5%"></th>
                  <th width="20%"></th>
                  <th width="20%"></th>
                  <th width="14%"></th>
                  <th width="2%"></th>
                  <th width="10%"></th>
                  <th width="15%"></th>
                </tr>
                <tr>
                  <th colspan="10">
                    <t t-if="o.state == 'cancel'">
                      <div style="position:absolute;opacity:0.25;z-index:1000;transform:rotate(300deg);-webkit-transform:rotate(300deg);width:100%;height:500px;">
                        <p style="font-size:70px; color:red; padding-top: 200px;">ANULADO</p>
                      </div>
                    </t>
                    <t t-if="o.state == 'draft'">
                      <div style="position:absolute;opacity:0.25;z-index:1000;transform:rotate(300deg);-webkit-transform:rotate(300deg);width:100%;height:510px;">
                        <p style="font-size:70px; color:grey; padding-top: 200px;">BORRADOR</p>
                      </div>
                    </t>
                  </th>
                </tr>
                <tr class="factura_encabezado1">
                  <th colspan="8">
                    <p>NOMBRE:
                      <span t-field="o.partner_id.name"/></p>
                    <p>DIRECCIÓN:
                      <span t-field="o.partner_id.display_street"/></p>
                  </th>
                  <th colspan="2">
                    <p>FECHA:
                      <span t-field="o.invoice_date"/></p>
                    <p>TEL:
                      <span t-field="o.partner_id.phone"/></p>
                    <p>NIT:
                      <span t-field="o.partner_id.vat"/></p>
                  </th>
                </tr>
                <tr class="factura_encabezado2">
                  <th colspan="2">O/C CLIENTE<p t-field="o.referencia_interna"/></th>
                  <th colspan="3">CODIGO CLIENTE<p t-field="o.partner_id.vat"/></th>
                  <th>CONDICIONES DE PAGO<p t-field="o.invoice_payment_term_id.name"/></th>
                  <th colspan="2">VENDIDO POR<p t-field="o.invoice_user_id.name"/></th>
                  <th colspan="2">NUMERO DE PEDIDO<p t-field="o.invoice_origin"/></th>
                </tr>
                <tr class="factura_encabezado3">
                  <th>CODIGO</th>
                  <th colspan="2">CANTIDAD</th>
                  <th>U/M</th>
                  <th colspan="3">DESCRIPCION</th>
                  <th colspan="2">UNITARIO</th>
                  <th colspan="2">TOTAL</th>
                </tr>
              </thead>
              <tbody>
                <t t-foreach="pagina" t-as="l">
                  <tr>
                    <t t-if="l['blanco']">
                      <td>&#160;</td>
                      <td colspan="2">&#160;</td>
                      <td class="text-center">&#160;</td>
                      <td colspan="3">&#160;</td>
                      <td colspan="2">&#160;</td>
                      <td>&#160;</td>
                    </t>
                    <t t-else="">
                      <td><span t-esc="l['default_code']"/></td>
                      <td colspan="2" class="text-center"><span t-esc="l['quantity']"/></td>
                      <td class="text-center"><span t-esc="l['product_uom_name']"/></td>
                      <td colspan="3"><t t-esc="l['name']"/></td>
                      <td colspan="2" class="factura_td_numeros"><span t-esc="l['price_unit']"/></td>
                      <td class="factura_td_numeros"><span t-esc="l['price_total']"/></td>
                    </t>
                  </tr>
                </t>

              </tbody>
              <tfoot class="footer factura_pie_tabla">
                <tr>
                  <td colspan="7" class="factura_encabezado1">TOTAL A PAGAR EN LETRAS<br/><t t-esc="o.monto_letras(o.amount_total)"/></td>
                  <td colspan="2" class="text-center">TOTAL</td>
                  <td class="factura_td_numeros"><span t-esc="o.amount_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                </tr>
              </tfoot>
            </table>
          </t>
        </div>
        <div class="footer">
            <link rel="stylesheet" href="/britania/static/src/css/report.css"/>
            <div class="row fac_t_letra">
              <div class="col-4">USUARIO:
                <span t-field="o.user_id.name"/></div>
              <div class="col-4">
                <t t-if="o.journal_id.fel_frases_ids">
                  <t t-foreach="o.journal_id.fel_frases_ids" t-as="frase">
                    <t t-esc="frase.fel_escenario.texto.upper()"/><br/>
                  </t>
                </t>
                NO SE ACEPTAN DEVOLUCIONES
              </div>
              <div class="col-4">PESO:</div>
            </div>
            <t t-if="o.journal_id.tipo_documento in ('NDEB','NCRE')">
              <t t-set="informacion" t-value="o.get_info_document()"/>
              <div class="row fac_t_letra">
                <div class="col-4">Fecha emision doc origen:</div>
                <div class="col-8">&#160;&#160;&#160;<t t-esc="informacion['fecha_emision']"/></div>
              </div>
              <div class="row fac_t_letra">
                <div class="col-4">Numero autorizacion doc origen:</div>
                <div class="col-8">&#160;&#160;&#160;<t t-esc="informacion['numero_autorizacion']"/></div>
              </div>
              <div class="row fac_t_letra">
                <div class="col-4">Motivo Ajuste:</div>
                <div class="col-8">&#160;&#160;&#160;<t t-esc="informacion['motivo']"/></div>
              </div>
            </t>
            <div t-attf-class="row fac_t_letra_peq text-justify p-3 {{ 'fac_t_letra_blanca' if o.journal_id.tipo_documento != 'FCAM' else '' }}">
              EL TOTAL DE ESTA FACTURA DEBERA HACERSE EFECTIVO EL
              <t t-esc="o.fecha()"/>
              SI EL COMPRADOR INCURRIERA EN UN ATRASO, ACEPTA UN CARGO DE INTERES DEL 3% MENSUAL; LA FALTA DE PAGO A LA FECHA CONVENIDA DARA POR VENCIDO EL PLAZO A FAVOR DEL COMPRADOR Y HARA EXIGIBLE EL SALDO DE LA OBLICACION EL ACEPTANTE COMPRADOR Y AVALISTA POR
              EL CARÁCTER DE FACTURA CAMBIARIA ELECTRONICA ACEPTA LAS CONDICIONES DE ESTA FACTURA CAMBIARIA ELECTRONICA.
              <b>COBRO POR CHEQUE RECHAZADO Q.150.00</b>
            </div>
            <div class="row fac_t_letra_peq p-2">
              <div class="col-4 text-center">____________________________________________________________________<br/>RECIBI CONFORME/NOMBRE</div>
              <div class="col-2">
                <t t-if="o.journal_id.tipo_documento == 'FCAM'">NUMERO DE ABONO:<br/>MONTO DE ABONO:</t>
              </div>
              <div class="col-2 text-right">
                <t t-if="o.journal_id.tipo_documento == 'FCAM'">1<br/><span t-esc="o.amount_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></t>
              </div>
              <div class="col-4 text-center">____________________________________________________________________<br/>ENTREGUE CONFORME/NOMBRE</div>
            </div>
            <div class="row fac_t_letra_peq factura_linea">
              <div class="col-6">Autorizacion:<t t-esc="o.fel_firma"/></div>
              <div class="col-6">Fecha de Certificación:<t t-esc="o.fecha_certificacion"/></div>
            </div>
            <div class="row fac_t_letra_peq">
            <div class="col-6">
              <t t-if="o.journal_id.tipo_documento == 'FCAM'">
                LUGAR DE ENTREGA:
                <t t-if="o.partner_shipping_id"><span t-field="o.partner_shipping_id.street"/></t>
                <t t-if="not o.partner_shipping_id"><span t-field="o.partner_id.street"/></t><br/>
                TIEMPO DE ENTREGA:&#160;<br/>
                CON ATENCION A:&#160;
              </t>
            </div>
            <div class="col-3">
              Datos del certificador<br/>
              NIT:<t t-esc="o.fel_setting_id.proveedor_id.vat"/><br/>
              Nombre:<t t-esc="o.fel_setting_id.proveedor_id.name"/>
            </div>
            <div class="col-3"><img src="/britania/static/description/FEL.PNG" style="max-height:70px;padding-top: 4px;"/></div>
          </div>
        </div>
      </t>
    </template>

    <template id="britania.invoice_template">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
          <t t-call="{{o.journal_id.template_invoice}}"/>
        </t>
      </t>
    </template>

    <record id="carta_britania" model="report.paperformat">
      <field name="name">Papel Carta</field>
      <field name="default" eval="True"/>
      <field name="format">custom</field>
      <field name="page_height">279</field>
      <field name="page_width">215</field>
      <field name="orientation">Portrait</field>
      <field name="margin_top">45</field>
      <field name="margin_bottom">60</field>
      <field name="margin_left">3</field>
      <field name="margin_right">3</field>
      <field name="header_line" eval="False"/>
      <field name="header_spacing">39</field>
      <field name="dpi">90</field>
    </record>

    <report id="reporte_factura" name="britania.invoice_template" file="britania.invoice_template" model="account.move" report_type="qweb-pdf" string="Factura Impresion" attachment_use="False" menu="True" paperformat="carta_britania"/>

    <report
      id="account.account_invoices"
      model="account.move"
      string="Invoices"
      report_type="qweb-pdf"
      name="account.report_invoice_with_payments"
      file="account.report_invoice_with_payments"
      attachment="(object.state == 'posted') and ((object.name or 'INV').replace('/','_')+'.pdf')"
      print_report_name="(object._get_report_base_filename())"
      groups="account.group_account_invoice"
      menu="False"/>

    <report
      id="account.account_invoices_without_payment"
      model="account.move"
      string="Invoices without Payment"
      report_type="qweb-pdf"
      name="account.report_invoice"
      file="account.report_invoice"
      attachment="(object.state == 'posted') and ((object.name or 'INV').replace('/','_')+'.pdf')"
      print_report_name="(object._get_report_base_filename())"
      menu="False"/>

  </data>
</odoo>
