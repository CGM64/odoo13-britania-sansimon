<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record model="ir.ui.view" id="view_repair_line_form_bri">
      <field name="name">repair.form.bri</field>
      <field name="model">repair.order</field>
      <field name="inherit_id" ref="repair.view_repair_order_form" />
      <field name="arch" type="xml">
        <data>
          <xpath expr="//field[@name='product_id']" position="replace">
            <field name="product_id" options="{'no_create': True}" domain="[('type', 'in', ['product', 'consu']),('is_vehicle','=',True)]" />
          </xpath>

          <xpath expr="//field[@name='operations']/tree/field[@name='product_id']" position="replace">
            <field name="product_id" options="{'no_create': True}" domain="[('type', '!=', 'service'),('is_vehicle','=',False)]" />
          </xpath>

          <xpath expr="//field[@name='user_id']" position="after">
            <field name="tipo_orden" options="{'no_create': True, 'no_edit': True}"/>
          </xpath>

          <xpath expr="//field[@name='location_id']" position="before">
            <field name="create_date" widget='date' readonly="1"/>
          </xpath>

          <xpath expr="//field[@name='operations']/form/group/group/field[@name='tax_id']" position="after">
            <label for="discount" groups="product.group_discount_per_so_line"/>
            <div name="discount" groups="product.group_discount_per_so_line">
                <field name="discount" class="oe_inline"/> %%
            </div>
          </xpath>

          <xpath expr="//field[@name='operations']/tree/field[@name='tax_id']" position="after">
            <field name="discount" string="Desc.%" groups="product.group_discount_per_so_line" optional="show"/>
          </xpath>

          <xpath expr="//field[@name='fees_lines']/tree/field[@name='tax_id']" position="after">
            <field name="discount" string="Desc.%" groups="product.group_discount_per_so_line" optional="show"/>
          </xpath>
        </data>
      </field>
    </record>

    <!--Menu de Tipo de Reparación-->
    <record id="repair_type_tree" model="ir.ui.view">
      <field name="name">repair.type.tree</field>
      <field name="model">repair.type</field>
      <field name="arch" type="xml">
          <tree string="Tipos de reparación" decoration-muted="not active">
              <field name="sequence" widget="handle"/>
              <field name="name"/>
              <field name="active" widget="boolean_toggle"/>
          </tree>
      </field>
  </record>

    <record id="repair_type_form" model="ir.ui.view">
      <field name="name">repair.type.form</field>
      <field name="model">repair.type</field>
      <field name="arch" type="xml">
        <form string="Tipos de reparación" class="o_expense_form">
          <header>
            <field name="state" widget="statusbar" statusbar_visible="borrador" invisible="1" />
          </header>
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" placeholder="Ejemplo: Servicio" />
              </h1>
            </div>
          </sheet>
        </form>
      </field>
  </record>

  <record id="repair_type_action" model="ir.actions.act_window">
    <field name="name">Tipos de ordenes de reparación</field>
    <field name="res_model">repair.type</field>
    <field name="view_mode">tree,kanban,form</field>
    <field name="domain" eval="False"/> <!-- Force empty -->
    <field name="context">{'active_test': False}</field>
    <field name="view_id" ref="repair_type_tree"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
              Crea tipos de ordenes de reparación
          </p>
    </field>
  </record>

  <menuitem id="menu_repair_type_menu_list" name="Tipos de ordenes de reparación" action="repair_type_action" parent="repair.repair_menu_config" groups="base.group_user" />


    <record model="ir.ui.view" id="view_repair_order_tree_inherit">
      <field name="name">repair.tree</field>
      <field name="model">repair.order</field>
      <field name="inherit_id" ref="repair.view_repair_order_tree"/>
      <field name="arch" type="xml">
        <data>
          <xpath expr="//field[@name='name']" position="after">
            <field name="create_date" string="Fecha"  widget="date"/>
          </xpath>
        </data>
      </field>
    </record>



      <record model="ir.ui.view" id="view_repair_order_form_inherit">
      <field name="name">repair.form</field>
      <field name="model">repair.order</field>
      <field name="inherit_id" ref="repair.view_repair_order_form"/>
      <field name="arch" type="xml">
        <data>
            <xpath expr="//button[@name='action_repair_cancel']" position="after">
                <button name="asignar_costo" class="oe_highlight" string="Asignar Costos" type="object" invisible='1'/>
            </xpath>
        </data>
      </field>
    </record>

  </data>
</odoo>