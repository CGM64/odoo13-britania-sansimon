<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record model="ir.ui.view" id="view_repair_line_form_bri">
      <field name="name">repair.form.bri</field>
      <field name="model">repair.order</field>
      <field name="inherit_id" ref="repair.view_repair_order_form" />
      <field name="arch" type="xml">
        <data>
          <xpath expr="//field[@name='product_id']" position="replace">
            <field name="product_id" options="{'no_create': True}" domain="[('type', 'in', ['product', 'consu']),('is_vehicle','=',True)]" />
          </xpath>

          <xpath expr="//field[@name='operations']/tree/field[@name='product_id']" position="replace">
            <field name="product_id" options="{'no_create': True}" domain="[('type', '!=', 'service'),('is_vehicle','=',False)]" />
          </xpath>
        </data>
      </field>
    </record>

    <!--Menu de Tipo de Reparaci贸n-->
    <record id="repair_type_action" model="ir.actions.act_window">
      <field name="name">Tipos de ordenes de reparaci贸n</field>
      <field name="res_model">repair.type</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
                Crea tipos de ordenes de reparaci贸n
            </p>
      </field>
    </record>

    <menuitem id="menu_repair_type_menu_list" name="Tipos de ordenes de reparaci贸n" action="repair_type_action" parent="repair.repair_menu_config" groups="base.group_user" />
    
    <record id="repair_type_form" model="ir.ui.view">
      <field name="name">repair.type.view.form</field>
      <field name="model">repair.type</field>
      <field name="arch" type="xml">
        <form string="Tipos de ordenes de trabajo" class="o_expense_form">
          <header>
            <field name="state" widget="statusbar" statusbar_visible="borrador" invisible="1" />
          </header>
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" placeholder="Ejemplo: Servicio" />
              </h1>
              <group>
                <field string="Tipo de orden por defecto" name="default_type"/>
              </group>
            </div>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Colacando campo en vista reparacion-->
    <record model="ir.ui.view" id="view_repair_line_form_bri">
      <field name="name">repair.form.type</field>
      <field name="model">repair.order</field>
      <field name="inherit_id" ref="repair.view_repair_order_form"/>
      <field name="arch" type="xml">
        <data>
          <xpath expr="//field[@name='user_id']" position="after">
            <field name="tipo_orden" options="{'no_create': True, 'no_edit': True}"/>
          </xpath>
          <xpath expr="//field[@name='location_id']" position="before">
            <field name="create_date" widget='date' readonly="1"/>
          </xpath>
        </data>
      </field>
    </record>

  </data>
</odoo>
