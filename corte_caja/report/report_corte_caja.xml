<odoo>
    <data>
        <template id="report_corte_caja_pdf">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">

                        <div clas="page mb-5">

                            <style>
                            .div-bg {
                                background-color:#3D3D3D;
                                border-radius:20px;
                            }
                            .border-secondary{
                                border: 2px solid  #3D3D3D !important;
                                border-radius:20px !important;
                            }
                            </style>

                            <h2 class="text-center">REPORTE DE CORTE DE CAJA</h2>
                            <div clas="encabezado" t-foreach="o.encabezado_corte_caja()" t-as="dato">
                                <div class="row">
                                    <div class="col-auto">
                                        <strong>Fecha de Impresión:</strong>
                                    </div>
                                    <div class="col-auto">
                                        <p t-esc="context_timestamp(datetime.datetime.now()).strftime('%d-%m-%Y')"/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-auto">
                                        <strong>Cajero:</strong>
                                    </div>
                                    <div class="col-auto">
                                        <p t-esc="dato['user_id']" />
                                    </div>
                                    <div class="col-auto">
                                        <strong>Origen:</strong>
                                    </div>
                                    <div class="col-auto">
                                        <p t-esc="dato['origen']" />
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-auto">
                                        <strong>Del:</strong>
                                    </div>
                                    <div class="col-auto">
                                        <p t-esc="dato['fecha_inicio']" />
                                    </div>
                                    <div class="col-auto">
                                        <strong>al:</strong>
                                    </div>
                                    <div class="col-auto">
                                        <p t-esc="dato['fecha_fin']" />
                                    </div>
                                </div>
                            </div>



                            <div class="detalle mt-2" t-foreach="o.corte_caja_pdf()" t-as="dato">
                                <div class="row">
                                    <div class="col-3">
                                        <strong>
                                            <p t-esc="dato['diario']" />
                                        </strong>
                                    </div>
                                </div>
                                <div class="row div-bg p-1 mb-1 text-white">
                                    <div class="col-2 text-center ">PAGO</div>
                                    <div class="col-2 text-center ">FECHA</div>
                                    <div class="col-2 text-center">CIRCULAR</div>
                                    <div class="col-3 text-center">CLIENTE</div>
                                    <div class="col-4 text-center">MONTO</div>
                                </div>

                                <div class="row" t-foreach="dato['factura']" t-as="fac">
                                    <div class="col-auto ">
                                        <p t-esc="fac['account_payment_line_id']" />
                                    </div>
                                    <div class="col-auto ">
                                        <p t-esc="fac['payment_date']" />
                                    </div>
                                    <div class="col-auto ">
                                        <p t-esc="fac['circular']" />
                                    </div>
                                    <div class="col-5 ">
                                        <p t-esc="fac['partner_id']" />
                                    </div>
                                    <div class="col-auto text-right">
                                        <p t-esc="fac['amount']" />
                                    </div>
                                </div>

                                <div class="row justify-content-end">
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">Subtotal:</strong>
                                    </div>
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">
                                            <p t-esc="dato['subtotal']"/>
                                        </strong>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-2 justify-content-end">
                                <div class="col-3">
                                    <strong class="float-right">Total:</strong>
                                </div>
                                <div class="col-3 p-3 mb-2 border text-white border-secondary rounded">
                                    <strong class="text-center">
                                        <p t-esc="o.total_corte_caja()"/>
                                    </strong>
                                </div>
                            </div>


                            <h4 class="text-left">ANTICIPOS</h4>
                            <div class="anticipos" t-foreach="o.listado_anticipos()" t-as="dato">
                                <div class="row div-bg p-1 mt-2 text-white">
                                    <div class="col-3 text-left ">PAGO</div>
                                    <div class="col-3 text-left ">FECHA</div>
                                    <div class="col-3 text-left">CLIENTE</div>
                                    <div class="col-3 text-left">MONTO</div>
                                </div>

                                <div class="row" t-foreach="dato['anticipos']" t-as="anticipo">
                                    <div class="col-3 ">
                                        <p t-esc="anticipo['pago']" />
                                    </div>
                                    <div class="col-3 ">
                                        <p t-esc="anticipo['date']" />
                                    </div>
                                    <div class="col-3 ">
                                        <p t-esc="anticipo['partner_id']" />
                                    </div>
                                    <div class="col-3 text-right">
                                        <p t-esc="anticipo['monto']" />
                                    </div>
                                </div>

                                <div class="row justify-content-end">
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">Total:</strong>
                                    </div>
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">
                                            <p t-esc="dato['total']"/>
                                        </strong>
                                    </div>
                                </div>
                            </div>

                            <h4 class="text-left">RESUMEN FACTURAS</h4>
                            <div class="" t-foreach="o.detalle_facturas()" t-as="dato">
                                <div class="row">
                                    <div class="col-3">
                                        <strong>
                                            <p t-esc="dato['estado']" />
                                        </strong>
                                    </div>
                                    <div class="col-3">
                                        <strong>
                                            <p t-esc="dato['total']" />
                                        </strong>
                                    </div>
                                </div>

                                <t t-if=" dato['estado']=='No pagadas'">
                                    <div class="row div-bg p-1 mt-2 text-white">
                                        <div class="col-3 text-left ">FACTURA</div>
                                        <div class="col-2 text-left ">FECHA</div>
                                        <div class="col-3 text-left ">CLIENTE</div>
                                        <div class="col-2 text-center ">MONTO</div>
                                        <div class="col-2 text-center ">SALDO</div>
                                    </div>
                                </t>

                                <div class="row" t-foreach="dato['facturas']" t-as="fac">
                                    <t t-if=" dato['estado']=='No pagadas'">

                                        <div class="col-3 p-0">
                                            <p t-esc="fac['factura']" />
                                        </div>
                                        <div class="col-2  ">
                                            <p t-esc="fac['date']" />
                                        </div>
                                        <div class="col-3  ">
                                            <p t-esc="fac['partner_id']" />
                                        </div>
                                        <div class="col-2  text-right">
                                            <p t-esc="fac['monto']" />
                                        </div>
                                        <div class="col-2  text-right">
                                            <p t-esc="fac['saldo']" />
                                        </div>
                                    </t>
                                </div>

                            </div>


                            <h4 class="text-left mt-2">FACTURAS DE OTROS DÍAS</h4>
                            <div class="facturas" t-foreach="o.facturas_otros_dias()" t-as="dato">
                                <div class="row div-bg p-1 mt-2 text-white">
                                    <div class="col-3 text-left ">FACTURA</div>
                                    <div class="col-3 text-left ">FECHA</div>
                                    <div class="col-3 text-left">CLIENTE</div>
                                    <div class="col-3 text-left">MONTO</div>
                                </div>

                                <div class="row" t-foreach="dato['facturas']" t-as="fac">
                                    <div class="col-3 ">
                                        <p t-esc="fac['name']" />
                                    </div>
                                    <div class="col-3 ">
                                        <p t-esc="fac['date']" />
                                    </div>
                                    <div class="col-3 ">
                                        <p t-esc="fac['partner_id']" />
                                    </div>
                                    <div class="col-3 text-right">
                                        <p t-esc="fac['amount_total']" />
                                    </div>
                                </div>

                                <div class="row justify-content-end">
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">Total:</strong>
                                    </div>
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">
                                            <p t-esc="dato['total']"/>
                                        </strong>
                                    </div>
                                </div>
                            </div>



                            <h4 class="text-left">NOTAS DE CRÉDITO</h4>
                            <div class="nc" t-foreach="o.detalle_notas_credito()" t-as="dato">
                                <div class="row div-bg p-1 mt-2 text-white">
                                    <div class="col-3 text-left ">NOTA CREDITO</div>
                                    <div class="col-3 text-left ">FECHA</div>
                                    <div class="col-3 text-left">CLIENTE</div>
                                    <div class="col-3 text-left">MONTO</div>
                                </div>

                                <div class="row" t-foreach="dato['nota_credito']" t-as="nc">
                                    <div class="col-3 ">
                                        <p t-esc="nc['name']" />
                                    </div>
                                    <div class="col-3 ">
                                        <p t-esc="nc['invoice_date']" />
                                    </div>
                                    <div class="col-3 ">
                                        <p t-esc="nc['partner_id']" />
                                    </div>
                                    <div class="col-3 text-right">
                                        <p t-esc="nc['amount_total']" />
                                    </div>
                                </div>

                                <div class="row justify-content-end">
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">Total:</strong>
                                    </div>
                                    <div class="col-3 border-bottom border-top">
                                        <strong class="float-right">
                                            <p t-esc="dato['total']"/>
                                        </strong>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
